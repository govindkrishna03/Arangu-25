<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arangu'25 Leaderboard</title>
    <link rel="icon" type="image/png" href="arangulogo.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            background: url('bg.png') no-repeat center center fixed;
            background-size: cover;
            position: relative;
            padding: 20px;
        }

        .leaderboard-container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            border-radius: 50px;
            background: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .leaderboard-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: black;
            padding: 0px;
        }
        .header {
    font-size: 1.4rem;
    font-weight: bold;
    background: #ddd;
    box-shadow: none;
}

        .leaderboard-entry {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 25px;
    border-radius: 50px;
    font-size: 1.3rem;
    font-weight: bold;
    background: white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s, box-shadow 0.3s;
    margin-bottom: 15px; /* Added gap between houses */
}

.leaderboard-entry:last-child {
    margin-bottom: 0; /* Ensures no extra space at the bottom */
}

        .leaderboard-entry:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .house-name {
            display: flex;
            align-items: center;
            color: black;
        }

        .house-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 15px;
        }

        .top-rank {
            font-size: 1.5rem;
            font-weight: bold;
            color: black;
        }

        .anandamayi { background: #ff9999; } /* Darker Light Red */
.amritamayi { background: #99e699; } /* Darker Light Green */
.chinmayi { background: #e0e0e0; }  /* Darker Light Gray */
.jyothirmayi { background: #99ccff; } /* Darker Light Blue */

    </style>
</head>
<body>
    <div class="leaderboard-container">
        <img src="arangulogo.png" height="80px" style="margin-bottom: 10px;"/>  
        <h2 class="leaderboard-title">Arangu'25 </h2>
        <div id="leaderboard"></div>
    </div>

    <script>
        async function fetchLeaderboard() {
            try {
                const response = await fetch("https://backend-leaderboard.onrender.com/");
                const data = await response.json();
                
                const houses = data.values[0];
                const points = data.values[1].map(Number);

                let leaderboardData = houses.map((house, index) => ({
                    house,
                    points: points[index]
                })).sort((a, b) => b.points - a.points);

                renderLeaderboard(leaderboardData);
            } catch (error) {
                console.error("Error fetching leaderboard:", error);
            }
        }

        function renderLeaderboard(data) {
    const leaderboard = document.querySelector("#leaderboard");
    // leaderboard.innerHTML = `
    //     <div class="leaderboard-entry header">
    //         <span class="house-label">House</span>
    //         <span class="points-label">Points</span>
    //     </div>
    // `;

    data.forEach((entry, index) => {
        const div = document.createElement("div");
        div.className = `leaderboard-entry ${getHouseClass(entry.house)}`;

        div.innerHTML = `
            <div class="house-name">
               
                ${index < 3 ? `<span class="top-rank">${entry.house}</span>` : entry.house}
            </div>
            <div>${entry.points}</div>
        `;

        leaderboard.appendChild(div);
    });
}

        function getHouseClass(house) {
            switch (house.toLowerCase()) {
                case "anandamayi": return "anandamayi";
                case "amritamayi": return "amritamayi";
                case "chinmayi": return "chinmayi";
                case "jyothirmayi": return "jyothirmayi";
                default: return "";
            }
        }

        fetchLeaderboard();
        setInterval(fetchLeaderboard, 10000);
    </script>
</body>
</html>
